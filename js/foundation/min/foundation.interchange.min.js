!function(e,t,i){"use strict";Foundation.libs.interchange={name:"interchange",version:"4.3.3",cache:{},images_loaded:!1,settings:{load_attr:"interchange",named_queries:{"default":"only screen and (min-width: 1px)",small:"only screen and (min-width: 768px)",medium:"only screen and (min-width: 1280px)",large:"only screen and (min-width: 1440px)",landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx)"},directives:{replace:function(e,t){if(/IMG/.test(e[0].nodeName)){var i=e[0].src;if(new RegExp(t,"i").test(i))return;return e[0].src=t,e.trigger("replace",[e[0].src,i])}}}},init:function(t,i,n){return Foundation.inherit(this,"throttle"),"object"==typeof i&&e.extend(!0,this.settings,i),this.events(),this.images(),"string"!=typeof i?this.settings.init:this[i].call(this,n)},events:function(){var i=this;e(t).on("resize.fndtn.interchange",i.throttle(function(){i.resize.call(i)},50))},resize:function(){var t=this.cache;if(!this.images_loaded)return setTimeout(e.proxy(this.resize,this),50),void 0;for(var i in t)if(t.hasOwnProperty(i)){var n=this.results(i,t[i]);n&&this.settings.directives[n.scenario[1]](n.el,n.scenario[0])}},results:function(t,i){var n=i.length;if(n>0)for(var r=e('[data-uuid="'+t+'"]'),a=n-1;a>=0;a--){var s,o=i[a][2];if(s=this.settings.named_queries.hasOwnProperty(o)?matchMedia(this.settings.named_queries[o]):matchMedia(o),s.matches)return{el:r,scenario:i[a]}}return!1},images:function(e){return"undefined"==typeof this.cached_images||e?this.update_images():this.cached_images},update_images:function(){var e=i.getElementsByTagName("img"),t=e.length,n=0,r="data-"+this.settings.load_attr;this.cache={},this.cached_images=[],this.images_loaded=!1;for(var a=t-1;a>=0;a--){if(n++,e[a]){var s=e[a].getAttribute(r)||"";s.length>0&&this.cached_images.push(e[a])}n===t&&(this.images_loaded=!0,this.enhance())}return"deferred"},enhance:function(){for(var i=this.images().length,n=i-1;n>=0;n--)this.object(e(this.images()[n]));return e(t).trigger("resize")},parse_params:function(e,t,i){return[this.trim(e),this.convert_directive(t),this.trim(i)]},convert_directive:function(e){var t=this.trim(e);return t.length>0?t:"replace"},object:function(e){var t=this.parse_data_attr(e),i=[],n=t.length;if(n>0)for(var r=n-1;r>=0;r--){var a=t[r].split(/\((.*?)(\))$/);if(a.length>1){var s=a[0].split(","),o=this.parse_params(s[0],s[1],a[1]);i.push(o)}}return this.store(e,i)},uuid:function(e){function t(){return(0|65536*(1+Math.random())).toString(16).substring(1)}var i=e||"-";return t()+t()+i+t()+i+t()+i+t()+i+t()+t()+t()},store:function(e,t){var i=this.uuid(),n=e.data("uuid");return n?this.cache[n]:(e.attr("data-uuid",i),this.cache[i]=t)},trim:function(t){return"string"==typeof t?e.trim(t):t},parse_data_attr:function(e){for(var t=e.data(this.settings.load_attr).split(/\[(.*?)\]/),i=t.length,n=[],r=i-1;r>=0;r--)t[r].replace(/[\W\d]+/,"").length>4&&n.push(t[r]);return n},reflow:function(){this.images(!0)}}}(Foundation.zj,this,this.document);